<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Tohas home (Записи о python)</title><link>http://shurp.in/</link><description></description><atom:link href="http://shurp.in/categories/python.xml" rel="self" type="application/rss+xml"></atom:link><language>ru</language><copyright>Contents © 2018 &lt;a href="mailto:anton.shurpin@gmail.com"&gt;Anton Shurpin&lt;/a&gt; </copyright><lastBuildDate>Wed, 05 Sep 2018 19:38:42 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Fractions</title><link>http://shurp.in/posts/2017/07/19/fractions/</link><dc:creator>Anton Shurpin</dc:creator><description>&lt;div&gt;&lt;p&gt;Занятно, но иногда (очень-очень редко) бывают нужны рациональные чиселки. И вот, что пришло в голову:&lt;/p&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;it&lt;/span&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fractions&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Fraction&lt;/span&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-3"&gt;&lt;/a&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-4"&gt;&lt;/a&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;take&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;iterable&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-6"&gt;&lt;/a&gt;        &lt;span class="sd"&gt;"""Return first n items of the iterable"""&lt;/span&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-7"&gt;&lt;/a&gt;        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;islice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;iterable&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-8"&gt;&lt;/a&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-9"&gt;&lt;/a&gt;&lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Fraction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-10"&gt;&lt;/a&gt;&lt;span class="n"&gt;step&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Fraction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-11"&gt;&lt;/a&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-12"&gt;&lt;/a&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fr&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;take&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;))):&lt;/span&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-13"&gt;&lt;/a&gt;        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;'{i}: {fr}'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-14"&gt;&lt;/a&gt;
&lt;a name="rest_code_4216510b2ce848f2949141d29b951010-15"&gt;&lt;/a&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="s1"&gt;'Result: {i + Fraction(17, 19)}'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;В консоле получим:&lt;/p&gt;
&lt;pre class="code console"&gt;&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-1"&gt;&lt;/a&gt;&lt;span class="go"&gt;0: 0&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-2"&gt;&lt;/a&gt;&lt;span class="go"&gt;1: 1/3&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-3"&gt;&lt;/a&gt;&lt;span class="go"&gt;2: 2/3&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-4"&gt;&lt;/a&gt;&lt;span class="go"&gt;3: 1&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-5"&gt;&lt;/a&gt;&lt;span class="go"&gt;4: 4/3&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-6"&gt;&lt;/a&gt;&lt;span class="go"&gt;5: 5/3&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-7"&gt;&lt;/a&gt;&lt;span class="go"&gt;6: 2&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-8"&gt;&lt;/a&gt;&lt;span class="go"&gt;7: 7/3&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-9"&gt;&lt;/a&gt;&lt;span class="go"&gt;8: 8/3&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-10"&gt;&lt;/a&gt;&lt;span class="go"&gt;9: 3&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-11"&gt;&lt;/a&gt;&lt;span class="go"&gt;10: 10/3&lt;/span&gt;
&lt;a name="rest_code_e19f630e936046ecb27ea8311308efd5-12"&gt;&lt;/a&gt;&lt;span class="go"&gt;Result: 207/19&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Собственно, когда нам нужно оперировать долями целого, то разумно накапливать результат прямо в рациональных числах, и лишь в конце перейти в &lt;a class="reference external" href="https://docs.python.org/3/library/decimal.html#decimal-objects"&gt;Decimal&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;</description><category>python</category><category>snippet</category><guid>http://shurp.in/posts/2017/07/19/fractions/</guid><pubDate>Wed, 19 Jul 2017 03:30:52 GMT</pubDate></item></channel></rss>